<!DOCTYPE html>
<html>
    <head>
        <title>Project Pinecone</title>
        <script src="assets/js/Prototype.js"></script>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale = 1,
        user-scalable = no" />
        <link rel = "stylesheet" href = "assets/css/main.css" />


    </head>
    
    <body>
    <!-- Navigation -->
    <nav class="w3-bar w3-black">
        <span class="navbar-title">
            <img src="images/logo.png" alt="Logo" class="navbar-logo">
            Project Pinecone
        </span>
        <a href="index.html" class="w3-button w3-bar-item">Home</a>
        <a href="create.html" class="w3-button w3-bar-item">Create</a>
        <a href="about.html" class="w3-button w3-bar-item">About</a>
    </nav>

    <!-- Create Section -->
    <section class="create-section">
        <div class="create-content">
            <script src="assets/js/calendarFileInput.js"></script>
            <h1>Create Your Calendar</h1>
    
    <!-- Calendar Display -->
        <div id="calendar"></div>

    <!-- Buttons for Importing Data -->
        <div class="import-buttons">
            <button id="import-from-file">Import from File</button>
        </div>

        <input type="file" id="calendarFileInput" style="display: none;" accept=".ics">

    <!-- Button to Export Data to ics file--> 
        <div class="import-buttons">
           <button id="export-to-ics">Export as .ics File </button>
        </div>

        <script>
            // Function for download itself
            function downloadICS(){
                const additionalEvents = [
                {
                    summary: 'Meeting with Client',
                    description: 'Discuss project updates',
                    start: new Date('2023-12-01T10:00:00Z'),
                    end: new Date('2023-12-01T11:00:00Z'),
                },
            // Add more events as needed
            ];
  
            
            //adds events seen in HTML file to any existing in JS file
            const allEvents = events.concat(additionalEvents);

            allIcsContent = createICS(allEvents);

            // Create a Blob with the iCalendar content
            const blob = new Blob([allIcsContent], { type: 'text/calendar' });

            // Create a link element
            const link = document.createElement('a');

            // Set the download attribute and the file name
            link.download = 'calendar.ics';

            // Create a URL for the Blob and set it as the link's href
            link.href = URL.createObjectURL(blob);

            // Append the link to the document body
            document.body.appendChild(link);

            // Trigger a click on the link to start the download
            link.click();

            // Remove the link from the document body
            document.body.removeChild(link);
            }

            const downloadButton = document.getElementById('export-to-ics');
            downloadButton.addEventListener('click', downloadICS);
        </script>

    </div>
</section>

<script src="assets/js/calendarFileInput.js"></script>
</body>

